@{
    var productData = ViewBag.ProductData as JObject; // Datos del producto obtenidos de la API
    var errorMessage = ViewBag.ErrorMessage as string; // Mensaje de error, si existe
    var productName = ViewBag.ProductName as string; // Nombre del producto
}

<h1 class="product-title">@productName</h1>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="error-message">
        <p>@errorMessage</p>
    </div>
}
else if (productData != null && productData.HasValues)
{
    <div class="product-section">
        <div class="product-inner">
            <div class="product-details-container">
                <div class="product-image-rating">
                    <div class="product-image-wrapper">
                        @if (!string.IsNullOrEmpty(productData["image_url"]?.ToString()))
                        {
                            <img src="@productData["image_url"].ToString()" 
                                 alt="@productName"
                                 class="product-image-new" />
                        }
                        else
                        {
                            <img src="/img/lays-classic.svg" 
                                 alt="Imagen no disponible"
                                 class="product-image-new" />
                        }
                        <div class="product-rating">
                            <span class="rating-circle rating-red"></span>
                            <h3 class="rating-text">
                                @("Calidad: " + (productData["nutrition_grades"]?.ToString()?.ToUpper() ?? "Sin calificación"))
                            </h3>
                        </div>
                    </div>
                </div>
                <div class="product-nutrition-info">
                    <div class="nutrition-info-item">
                        <img src="/img/icon_protein.svg" alt="Proteínas" class="nutrition-icon" />
                        <span>@("Proteínas: " + (productData["nutriments"]?["proteins_100g"]?.ToString() ?? "No disponible") + " g")</span>
                    </div>
                    <div class="nutrition-info-item">
                        <img src="/img/icon_scales.svg" alt="Carbohidratos" class="nutrition-icon" />
                        <span>@("Carbohidratos: " + (productData["nutriments"]?["carbohydrates_100g"]?.ToString() ?? "No disponible") + " g")</span>
                    </div>
                    <div class="nutrition-info-item">
                        <img src="/img/icon_tick.svg" alt="Calidad" class="nutrition-icon" />
                        <span>@("Grasas: " + (productData["nutriments"]?["fat_100g"]?.ToString() ?? "No disponible") + " g")</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="no-data-message">
        <p>No se encontró información para el producto buscado: "<strong>@productName</strong>"</p>
    </div>
}
